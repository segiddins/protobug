# frozen_string_literal: true

# Code generated by protoc-gen-protobug. DO NOT EDIT.

# source: in_toto_attestation/predicates/provenance/v1/provenance.proto
# syntax: proto3
# package: in_toto_attestation.predicates.provenance.v1
# options:
#   java_package: "io.github.intoto.attestation.predicates.provenance.v1"
#   go_package: "github.com/in-toto/attestation/go/predicates/provenance/v1"

require "protobug"

require "google/protobuf/struct_pb"
require "google/protobuf/timestamp_pb"

require_relative "../../../v1/resource_descriptor_pb"

module InTotoAttestation
  module Predicates
    module Provenance
      module V1
        # Proto representation of predicate type https://slsa.dev/provenance/v1
        # Validation of all fields is left to the users of this proto.
        class Provenance
          extend Protobug::Message

          self.full_name = "in_toto_attestation.predicates.provenance.v1.Provenance"

          optional(
            1,
            "build_definition",
            type: :message,
            message_type:
            "in_toto_attestation.predicates.provenance.v1.BuildDefinition",
            json_name: "buildDefinition",
            proto3_optional: false
          )
          optional(
            2,
            "run_details",
            type: :message,
            message_type:
            "in_toto_attestation.predicates.provenance.v1.RunDetails",
            json_name: "runDetails",
            proto3_optional: false
          )
        end

        class BuildDefinition
          extend Protobug::Message

          self.full_name = "in_toto_attestation.predicates.provenance.v1.BuildDefinition"

          optional(
            1,
            "build_type",
            type: :string,
            json_name: "buildType",
            proto3_optional: false
          )
          optional(
            2,
            "external_parameters",
            type: :message,
            message_type: "google.protobuf.Struct",
            json_name: "externalParameters",
            proto3_optional: false
          )
          optional(
            3,
            "internal_parameters",
            type: :message,
            message_type: "google.protobuf.Struct",
            json_name: "internalParameters",
            proto3_optional: false
          )
          repeated(
            4,
            "resolved_dependencies",
            type: :message,
            message_type: "in_toto_attestation.v1.ResourceDescriptor",
            json_name: "resolvedDependencies"
          )
        end

        class RunDetails
          extend Protobug::Message

          self.full_name = "in_toto_attestation.predicates.provenance.v1.RunDetails"

          optional(
            1,
            "builder",
            type: :message,
            message_type:
            "in_toto_attestation.predicates.provenance.v1.Builder",
            proto3_optional: false
          )
          optional(
            2,
            "metadata",
            type: :message,
            message_type:
            "in_toto_attestation.predicates.provenance.v1.BuildMetadata",
            proto3_optional: false
          )
          repeated(
            3,
            "byproducts",
            type: :message,
            message_type: "in_toto_attestation.v1.ResourceDescriptor"
          )
        end

        class Builder
          extend Protobug::Message

          self.full_name = "in_toto_attestation.predicates.provenance.v1.Builder"

          optional(1, "id", type: :string, proto3_optional: false)
          map(2, "version", key_type: :string, value_type: :string)
          repeated(
            3,
            "builder_dependencies",
            type: :message,
            message_type: "in_toto_attestation.v1.ResourceDescriptor",
            json_name: "builderDependencies"
          )
        end

        class BuildMetadata
          extend Protobug::Message

          self.full_name = "in_toto_attestation.predicates.provenance.v1.BuildMetadata"

          optional(
            1,
            "invocation_id",
            type: :string,
            json_name: "invocationId",
            proto3_optional: false
          )
          optional(
            2,
            "started_on",
            type: :message,
            message_type: "google.protobuf.Timestamp",
            json_name: "startedOn",
            proto3_optional: false
          )
          optional(
            3,
            "finished_on",
            type: :message,
            message_type: "google.protobuf.Timestamp",
            json_name: "finishedOn",
            proto3_optional: false
          )
        end

        def self.register_provenance_protos(registry)
          InTotoAttestation::V1.register_resource_descriptor_protos(registry)
          Google::Protobuf.register_struct_protos(registry)
          Google::Protobuf.register_timestamp_protos(registry)
          registry.register(
            InTotoAttestation::Predicates::Provenance::V1::Provenance
          )
          registry.register(
            InTotoAttestation::Predicates::Provenance::V1::BuildDefinition
          )
          registry.register(
            InTotoAttestation::Predicates::Provenance::V1::RunDetails
          )
          registry.register(
            InTotoAttestation::Predicates::Provenance::V1::Builder
          )
          registry.register(
            InTotoAttestation::Predicates::Provenance::V1::BuildMetadata
          )
        end
      end
    end
  end
end
